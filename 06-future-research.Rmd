---
bibliography: bibliography.bib
csl: ieee-with-url.csl
---

```{r setup6, include=FALSE}
library(data.table)
library(knitr)
library(multiwayvcov)
library(stargazer)
opts_chunk$set(echo=FALSE, message=FALSE, warning = FALSE)
stargazer.type <- opts_knit$get('rmarkdown.pandoc.to')
stargazer.type <- ifelse(is.null(stargazer.type), 'text', ifelse('latex' == stargazer.type, 'latex', 'html'))
```

# Applications and Future Research

## Solidifying the Result

```{r covariate_relabel6}
df.complete <- read.csv('data/Merged Data.csv')

df.newheader <- c(
  'id', 'mind','energy', 'nature', 'tactics', 'identity', 'experimenter',
  'in.treatment', 'gender', 'age', 'education', 'studying', 'learning',
  'reading', 'raw.score', 'adjusted.score', 'region')

names(df.complete) <- df.newheader

dt.complete <- data.table(df.complete)
```

Past research indicated a lack of statistically significant result when comparing Sensing (high-detail) personality types and Intuitive (low-detail) personality types in nursing [@mbtiNursing], as well as an improvement for Intuitive (low-detail) personality types in engineering [@mbtiEngineering].

Still, the research team was surprised that the group means were the opposite of what was hypothesized given the specific task under evaluation. In particular, the team was surprised that providing additional instructions appeared to lower scores for Intuitive (low-detail) personality types.

```{r treatment_means_redux}
dt.complete[
  order(energy, in.treatment),
  .(mean = mean(adjusted.score), sd = sd(adjusted.score)),
  by = .(energy, in.treatment)
]
```

Given the lack of statistical power, this may have been a case of regression to the mean. Additional follow up will be needed in order to evaluate the model.

## Going on a Fishing Expedition

In performing covariate checks, the team observed that there was a statistically significant correlation between the outcome variable and education.

For an individual $i$, if we let $education_{i1}$ indicate if the individual finished education after completing high school, $education_{i2}$ indicate if the individual finished their education after receiving an associate's degree, $education_{i3}$ indicate if the individual finished their education after 3+ years without receiving a degree, $education_{i4}$ indicate if the individual received a bachelor's degree, and $education_{i5}$ indicate if the individual finsihed their education after receiving a master's degree or higher.

The following model adds education as a variable:

$$
\begin{split}
AdjustedScore_i = & \beta_0 +
  \beta_1 Sensing_i +
  \beta_2 InTreatment_i +
  \beta_3 InTreatment_i \times Sensing_i + \\ &
  \beta_4 Delaware_i +
  \beta_5 SouthCarolina_i + \\ &
  \beta_9 Education_{1_i} + \beta_{10} Education_{2_i} + \beta_{11} Education_{3_i} + \beta_{12} Education_{4_i} + \beta_{13} Education_{5_i}
\end{split}
$$

For a subject $i$, $Education_{1_i}$ indicates whether the highest level of education attained is a high school diploma or GED, $Education_{2_i}$ indicates whether the highest level of education attained is an associate's degree, $Education_{3_i}$ indicates whether the highest level of education attained is 3 or more years of college without a degree, $Education_{4_i}$ indicates whether the highest level of education attained is a bachelor's degree, and $Education_{5_i}$ indicates whether the highest level of education attained is a master's degree or higher.

This model with clustered standard errors is compared to the region-specific model using `stargazer` [@stargazer]:

\newpage

```{r fishing_expedition, results = 'asis'}
model.4 <- lm(
  adjusted.score ~ energy * in.treatment + region,
  data = df.complete)

# Use clustered standard errors

model.4.se <- sqrt(diag(cluster.vcov(model.4, ~ region)))

# Compute the education terms

df.complete$education1 = df.complete$education == 'High school diploma or GED'
df.complete$education2 = df.complete$education == "Associate's degree"
df.complete$education3 = df.complete$education == '3 or more years of college, no Bachelor’s or Master’s degree'
df.complete$education4 = df.complete$education == 'Bachelor’s degree'
df.complete$education5 = df.complete$education == 'Master’s degree or higher'

model.6 <- lm(
  adjusted.score ~ education1 + education2 + education3 + education4 + education5,
  data = df.complete)

model.7 <- lm(
  adjusted.score ~ energy * in.treatment + education1 + education2 + education3 + education4 + education5 + region,
  data = df.complete)

# Use clustered standard errors

model.7.se <- sqrt(diag(cluster.vcov(model.7, ~ region)))

stargazer(
  model.4, model.6, model.7,
  se = list(model.4.se, NULL, model.7.se),
  header = FALSE,
  type = stargazer.type,
  title = 'Fishing Expedition',
  dep.var.labels = c('Adjusted Score')
)
```

The addition of the education indicator variables increases the variance for the $InTreatment_i$ term and reduces the variance in the $Sensing_i$ and $InTreatment_i$ interaction term.

Note that the $R^2$ is substantially higher for education alone than for the region-specific model.